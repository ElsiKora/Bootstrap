# Error Handling

The library utilizes a standardized approach to error handling based on the `IError` interface and the `BaseError` class.

## `IError` Interface

This interface extends the standard JavaScript `Error` and adds specific fields for better error management:

```typescript
interface IError extends Error {
  CODE: string; // A unique code for the error type (e.g., "REGISTRY_ITEM_NOT_FOUND")
  CAUSE?: Error; // The original error that triggered this one, if applicable
  context?: Record<string, unknown>; // Additional key-value data about the error context
  // `name` and `message` are inherited from Error
}
```

## `BaseError` Class

This is the concrete implementation of `IError` provided by the library. Use it to throw structured errors from your own code or within library extensions.

```typescript filename="src/data-service.ts"
import { BaseError } from '@elsikora/cladi';

try {
  // ... some operation that might fail ...
  if (!item) {
    throw new BaseError("Item could not be found in the database", {
      code: "DB_ITEM_NOT_FOUND",
      context: { itemId: 123, query: "SELECT * ..." },
      source: "UserRepository", // Optional: identifies the source module/class
    });
  }
} catch (error) {
  if (error instanceof BaseError) {
    console.error(`Code: ${error.CODE}, Message: ${error.message}, Context: ${JSON.stringify(error.context)}`);
    if (error.CAUSE) {
      console.error(`Cause: ${error.CAUSE.message}`);
    }
  } else {
    console.error("An unexpected error occurred:", error);
  }
}
```

## Benefits

- **Consistency**: All errors across the library (and potentially consuming applications) follow the same structure.
- **Programmatic Handling**: The `CODE` allows for easy identification and handling of specific error types.
- **Debugging**: `CAUSE`, `context`, and `source` provide richer information for diagnosing problems.

## Usage

- Catch errors and check if they are `instanceof BaseError` for specific handling.
- Use the `CODE` property in `switch` statements or `if` conditions.
- Log the extended properties (`context`, `CAUSE`, `source`) for better traceability. 